<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <title>WebApp Debug Form</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
<h2>Форма WebApp</h2>
<form id="form">
    <label>Имя: <input name="name" /></label><br><br>
    <label>Комментарий: <input name="comment" /></label><br><br>
    <button type="submit">Отправить</button>
</form>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    document.getElementById("form").addEventListener("submit", async (e) => {
        e.preventDefault();
        const form = Object.fromEntries(new FormData(e.target));

        console.log("Отправка формы:", form);

        const res = await fetch("https://your-backend-url.onrender.com/api/form", {
            method: "POST",
            headers: {"Content-Type": "application/json"},
            body: JSON.stringify({
                initData: tg.initData,
                form
            })
        });

        const data = await res.json();
        alert(data.message || "Ошибка");
        tg.close();
    });
</script>
</body>
</html>
